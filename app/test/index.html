<!doctype html>
<html>

<head>
  <script src="../bower_components/webcomponentsjs/webcomponents.js"></script>
  <link rel="import" href="../bower_components/polymer/polymer.html">
  <link rel="import" href="../bower_components/app-states/src/app-states.html">
</head>

<body unresolved>

  <!-- Define sections you want to load dynamically -->
  <section id="nav" is="states-section"></section>
  <section id="page" is="states-section"></section>

  <!-- Define application states -->
  <app-states id="stateManager">
    <app-state id="home" url="/">
      <template target="#nav" is="states-template">
        Content for home
      </template>

      <template target="#page" is="states-template">
        <!-- When url is / load this content into #page -->
      </template>

      <app-state id="login">
        <template target="#page" is="states-template">
          <!-- When url is /login load this content into #page -->
        </template>
        <!-- Inherit #nav content from home -->
      </app-state>
    </app-state>
  </app-states>

  <script>

  Polymer.whenReady(function() {
    var instance = document.getElementById('stateManager');

    if (instance.currentState.id !== 'login')
      instance.go('/login');

    instance.addEventListener('state-match', function(e) {
      // e.detail.match isa a reference to matched state.
      // If you set a value state manager will usrthat value as state.
    });

    // or use AppStates.getInstance().matchState
    // or use AppStates.matchState
    var state = instance.matchState('#/login');
    console.log(state.id);
    // login
  });

  </script>

</body>

</html>
