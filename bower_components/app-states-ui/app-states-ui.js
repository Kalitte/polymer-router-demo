!function(){Polymer("states-anchor",{ready:function(){},observe:{stateId:"setHref",stateUrl:"setHref",params:"setHref"},setHref:function(){var t;if(this.stateId)t=window.AppStates.getStateById(this.stateId);else{if(!this.stateUrl)return;t=window.AppStates.matchState(this.stateUrl)}if(t){var e=t.buildUrl(this.params);this.setAttribute("href","pushstate"!=window.AppStates.getCurrentMode()?"#"+e:e)}else this.setAttribute("href","")}})}(),Polymer("states-menu",{showRoot:!1,trackStateChange:function(t){var e=t.detail.currentState,a=this.shadowRoot.querySelectorAll("core-menu /deep/ [state]");[].map.call(a,function(t){for(var a=e;a;)t.state===a&&"SUB-MENU"==t.tagName&&t.activate(),a=a.parentState}.bind(this))},attached:function(){document.addEventListener("app-state-changed",this.trackStateChange.bind(this))},detached:function(){document.removeEventListener("app-state-changed",this.trackStateChange.bind(this))},ready:function(){this.menuItems=[],this.root=window.AppStates.getRootState()},rootChanged:function(){this.root&&this.loadMenu()},loadMenu:function(){var t=this.menuItems=[],e=window.AppStates.util,a=this,s=function(r,i){for(var n=0;n<r.length;n++){var o=r[n];if(!a.ignoreAttr||!(o.hasAttribute(a.ignoreAttr)||o.parentNode&&o.parentNode.hasAttribute(a.ignoreAttr))){var h={title:o.header,path:o.url,state:o,selected:a.menuItemSelected};i?(i.subItems=i.subItems||[],i.subItems.push(h)):t.push(h),s(e.directChildren(o,"app-state"),h)}}};s(window.AppStates.util.directChildren(this.root,"app-state"))}});