!function(){Polymer("states-anchor",{ready:function(){},observe:{stateId:"setHref",stateUrl:"setHref",params:"setHref"},setHref:function(){var t;if(this.stateId)t=window.AppStates.getStateById(this.stateId);else{if(!this.stateUrl)return;t=window.AppStates.matchState(this.stateUrl)}if(t){var e=t.buildUrl(this.params);this.setAttribute("href","pushstate"!=window.AppStates.getCurrentMode()?"#"+e:e)}else this.setAttribute("href","")}})}(),Polymer("states-menu",{showRoot:!1,trackStateChange:function(t){this.async(function(t){var e=t.detail.currentState,a=this.shadowRoot.querySelectorAll("core-menu /deep/ [state]");[].map.call(a,function(t){for(var a=e;a;){if(t.getAttribute("state")===a.id)if("CORE-SUBMENU"==t.tagName)t.active||(t.active=!0,t.activate());else if("CORE-ITEM"==t.tagName){var s=t.parentElement;s.selected=s.items.indexOf(t)}a=a.parentState}}.bind(this))},t)},attached:function(){document.addEventListener("app-state-changed",this.trackStateChange.bind(this))},detached:function(){document.removeEventListener("app-state-changed",this.trackStateChange.bind(this))},ready:function(){this.menuItems=[],this.root=window.AppStates.getRootState()},rootChanged:function(){this.root&&this.loadMenu()},loadMenu:function(){var t=this.menuItems=[],e=window.AppStates.util,a=this,s=function(i,n){for(var r=0;r<i.length;r++){var o=i[r];if(!a.ignoreAttr||!(o.hasAttribute(a.ignoreAttr)||o.parentNode&&o.parentNode.hasAttribute(a.ignoreAttr))){var d={title:o.header,path:o.url,state:o.id,selected:a.menuItemSelected};n?(n.subItems=n.subItems||[],n.subItems.push(d)):t.push(d),s(e.directChildren(o,"app-state"),d)}}};s(window.AppStates.util.directChildren(this.root,"app-state"))}});